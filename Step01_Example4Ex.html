<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Step01_Canvas4.html</title>
	<style>
		#myCanvas{
			border: 1px solid red;
		}
	</style>
</head>
<body>
<canvas id="myCanvas" width="500" height="500"></canvas>
<script src="js/jquery-3.3.1.js"></script>
<script>
    var canvas=document.querySelector("#myCanvas");
    // context 객체
    var context=canvas.getContext("2d");

    var hourImg = new Image();
    var minImg = new Image();
    var secImg = new Image();
    var clockImg = new Image();

    var sec, min, hour;

    hourImg.src = "images/clock_hour.png";
    minImg.src = "images/clock_min.png";
    secImg.src = "images/clock_sec.png";
    clockImg.src="images/dial.png";

    var getTime = function(){
        var d = new Date();
        hour = d.getHours()%12;
        min = d.getMinutes()%60;
        sec = d.getSeconds()%60;
    };
    clockImg.onload=function(){
        // setInterval(function(){
        //   context.save();
        //   context.translate(250, 250);
        //   context.drawImage(clockImg, -150, -150, 300, 300);
        //   // var sec = 5, min = 30, hour = 9;
        //   getTime();

        //   var r12 = 30 * 6 * (Math.PI / 180);
        //   var secR = r12 + (sec * 6 * (Math.PI / 180));
        //   var minR = (secR * -1) + r12 + (min * 6 * (Math.PI / 180));
        //   var hourR = (r12 + (min * 6 * (Math.PI / 180)) * -1) + r12
        //             + ((hour * 5 * 6) * (Math.PI / 180)) + ((min / 2) * (Math.PI/180));
        //    // var hourR = parseInt(min / 1.2) * 6;
        //   context.rotate(secR);
        //   context.drawImage(secImg, 0, 5);
        //   // context.rotate(secR * -1);
        //   context.rotate(minR);
        //   context.drawImage(minImg, -5, 0);
        //   context.rotate(hourR);
        //   context.drawImage(hourImg, -1, -22);

        //   context.restore();
        // }, 1000);

        context.translate(250, 250);
      	context.drawImage(clockImg, -150, -150, 300, 300);
        
        var sec = 5, min = 30, hour = 9;
        
        var r12 = 30 * 6 * (Math.PI / 180);
        var secR = r12 + (sec * 6 * (Math.PI / 180));
        var minR = (secR * -1) + r12 + (min * 6 * (Math.PI / 180));
        var hourR = (r12 + (min * 6 * (Math.PI / 180)) * -1) + r12
                  + ((hour * 5 * 6) * (Math.PI / 180)) + ((min / 2) * (Math.PI/180));
         // var hourR = parseInt(min / 1.2) * 6;
        context.rotate(secR);
        context.drawImage(secImg, -3, 0);
        // context.rotate(secR * -1);
        context.rotate(minR);
        context.drawImage(minImg, -5, 0);
        context.rotate(hourR);
        context.drawImage(hourImg, -1, -22);
    };
</script>
</body>
</html>